<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dietary Preferences</title>
    <script src='https://cdn.tailwindcss.com'></script>
    <script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    border: "var(--border)",
                    input: "var(--input)",
                    ring: "var(--ring)",
                    background: "var(--background)",
                    foreground: "var(--foreground)",
                    primary: {
                        DEFAULT: "var(--primary)",
                        foreground: "var(--primary-foreground)",
                    },
                    secondary: {
                        DEFAULT: "var(--secondary)",
                        foreground: "var(--secondary-foreground)",
                    },
                    destructive: {
                        DEFAULT: "var(--destructive)",
                        foreground: "var(--destructive-foreground)",
                    },
                    muted: {
                        DEFAULT: "var(--muted)",
                        foreground: "var(--muted-foreground)",
                    },
                    accent: {
                        DEFAULT: "var(--accent)",
                        foreground: "var(--accent-foreground)",
                    },
                    card: {
                        DEFAULT: "var(--card)",
                        foreground: "var(--card-foreground)",
                    },
                },
                borderRadius: {
                    lg: "var(--radius)",
                    md: "calc(var(--radius) - 2px)",
                    sm: "calc(var(--radius) - 4px)",
                },
                fontFamily: {
                    sans: ["var(--font-sans)"],
                    serif: ["var(--font-serif)"],
                    mono: ["var(--font-mono)"],
                },
                boxShadow: {
                    'DEFAULT': 'var(--shadow)',
                },
            },
        }
    }
    </script>
    <script>window.FontAwesomeConfig = {autoReplaceSvg: 'nest'};</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --background: #FAFAFA;
            --foreground: #0f172a;
            --card: #ffffff;
            --card-foreground: #0f172a;
            --primary: #FFD500;
            --primary-foreground: #8A8A8A;
            --secondary: #64748b;
            --secondary-foreground: #ffffff;
            --muted: #FAFAFA;
            --muted-foreground: #0f172a;
            --accent: #f59e0b;
            --accent-foreground: #ffffff;
            --destructive: #ef4444;
            --destructive-foreground: #ffffff;
            --border: #EEE;
            --input: #FFFFFF;
            --ring: #94a3b8;
            --font-sans: Be Vietnam Pro;
            --font-serif: Georgia, serif;
            --font-mono: JetBrains Mono, monospace;
            --radius: 10px;
            --shadow: -2px 4px 12px 4px rgba(51,51,51,0.05);
        }
        ::-webkit-scrollbar { display: none; }
        body {
            font-family: var(--font-sans), sans-serif;
        }
    </style>
</head>
<body class="bg-background">

    <div id="dietary-preferences-screen" class="min-h-screen flex flex-col px-6 py-8">
        
        <div id="preferences-header" class="mb-8">
            <button id="back-btn" class="text-secondary mb-6 flex items-center gap-2 hover:text-foreground transition-colors">
                <i class="fa-solid fa-arrow-left"></i>
                <span class="font-medium">Back</span>
            </button>

            <h1 class="text-foreground text-2xl font-bold mb-2">Any dietary preferences?</h1>
            <p class="text-secondary text-sm">Select all that apply</p>
        </div>

        <div id="location-indicator" class="bg-card border border-border rounded-lg p-4 mb-6 flex items-center gap-3 shadow-sm">
            <div class="w-10 h-10 bg-accent bg-opacity-10 rounded-lg flex items-center justify-center flex-shrink-0">
                <i class="fa-solid fa-location-dot text-accent text-lg"></i>
            </div>
            <div>
                <p class="text-foreground text-sm font-medium">You are in <span id="user-country" class="font-semibold">United States</span></p>
                <p class="text-muted-foreground text-xs">Location detected automatically</p>
            </div>
        </div>

        <div id="dietary-options" class="space-y-3 mb-8 flex-1">
            
            <div class="checkbox-item">
                <input type="checkbox" id="vegetarian" class="hidden" value="vegetarian">
                <label for="vegetarian" class="flex items-center justify-between bg-card border-2 border-border rounded-lg p-4 cursor-pointer transition-all hover:border-primary active:scale-[0.98]">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-muted rounded-lg flex items-center justify-center">
                            <i class="fa-solid fa-leaf text-xl text-secondary"></i>
                        </div>
                        <span class="text-foreground font-medium">Vegetarian</span>
                    </div>
                    <div class="w-6 h-6 border-2 border-border rounded flex items-center justify-center checkbox-indicator transition-all">
                        <i class="fa-solid fa-check text-xs text-white hidden"></i>
                    </div>
                </label>
            </div>

            <div class="checkbox-item">
                <input type="checkbox" id="vegan" class="hidden" value="vegan">
                <label for="vegan" class="flex items-center justify-between bg-card border-2 border-border rounded-lg p-4 cursor-pointer transition-all hover:border-primary active:scale-[0.98]">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-muted rounded-lg flex items-center justify-center">
                            <i class="fa-solid fa-seedling text-xl text-secondary"></i>
                        </div>
                        <span class="text-foreground font-medium">Vegan</span>
                    </div>
                    <div class="w-6 h-6 border-2 border-border rounded flex items-center justify-center checkbox-indicator transition-all">
                        <i class="fa-solid fa-check text-xs text-white hidden"></i>
                    </div>
                </label>
            </div>

            <div class="checkbox-item">
                <input type="checkbox" id="pescetarian" class="hidden" value="pescetarian">
                <label for="pescetarian" class="flex items-center justify-between bg-card border-2 border-border rounded-lg p-4 cursor-pointer transition-all hover:border-primary active:scale-[0.98]">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-muted rounded-lg flex items-center justify-center">
                            <i class="fa-solid fa-fish text-xl text-secondary"></i>
                        </div>
                        <span class="text-foreground font-medium">Pescetarian</span>
                    </div>
                    <div class="w-6 h-6 border-2 border-border rounded flex items-center justify-center checkbox-indicator transition-all">
                        <i class="fa-solid fa-check text-xs text-white hidden"></i>
                    </div>
                </label>
            </div>

            <div class="checkbox-item">
                <input type="checkbox" id="ketogenic" class="hidden" value="ketogenic">
                <label for="ketogenic" class="flex items-center justify-between bg-card border-2 border-border rounded-lg p-4 cursor-pointer transition-all hover:border-primary active:scale-[0.98]">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-muted rounded-lg flex items-center justify-center">
                            <i class="fa-solid fa-fire text-xl text-secondary"></i>
                        </div>
                        <span class="text-foreground font-medium">Ketogenic</span>
                    </div>
                    <div class="w-6 h-6 border-2 border-border rounded flex items-center justify-center checkbox-indicator transition-all">
                        <i class="fa-solid fa-check text-xs text-white hidden"></i>
                    </div>
                </label>
            </div>

            <div class="checkbox-item">
                <input type="checkbox" id="paleo" class="hidden" value="paleo">
                <label for="paleo" class="flex items-center justify-between bg-card border-2 border-border rounded-lg p-4 cursor-pointer transition-all hover:border-primary active:scale-[0.98]">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-muted rounded-lg flex items-center justify-center">
                            <i class="fa-solid fa-drumstick-bite text-xl text-secondary"></i>
                        </div>
                        <span class="text-foreground font-medium">Paleo</span>
                    </div>
                    <div class="w-6 h-6 border-2 border-border rounded flex items-center justify-center checkbox-indicator transition-all">
                        <i class="fa-solid fa-check text-xs text-white hidden"></i>
                    </div>
                </label>
            </div>

            <div class="checkbox-item">
                <input type="checkbox" id="gluten-free" class="hidden" value="gluten-free">
                <label for="gluten-free" class="flex items-center justify-between bg-card border-2 border-border rounded-lg p-4 cursor-pointer transition-all hover:border-primary active:scale-[0.98]">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-muted rounded-lg flex items-center justify-center">
                            <i class="fa-solid fa-wheat-awn-circle-exclamation text-xl text-secondary"></i>
                        </div>
                        <span class="text-foreground font-medium">Gluten-Free</span>
                    </div>
                    <div class="w-6 h-6 border-2 border-border rounded flex items-center justify-center checkbox-indicator transition-all">
                        <i class="fa-solid fa-check text-xs text-white hidden"></i>
                    </div>
                </label>
            </div>

            <div class="checkbox-item">
                <input type="checkbox" id="dairy-free" class="hidden" value="dairy-free">
                <label for="dairy-free" class="flex items-center justify-between bg-card border-2 border-border rounded-lg p-4 cursor-pointer transition-all hover:border-primary active:scale-[0.98]">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-muted rounded-lg flex items-center justify-center">
                            <i class="fa-solid fa-bottle-droplet text-xl text-secondary"></i>
                        </div>
                        <span class="text-foreground font-medium">Dairy-Free</span>
                    </div>
                    <div class="w-6 h-6 border-2 border-border rounded flex items-center justify-center checkbox-indicator transition-all">
                        <i class="fa-solid fa-check text-xs text-white hidden"></i>
                    </div>
                </label>
            </div>

            <div class="checkbox-item">
                <input type="checkbox" id="no-restrictions" class="hidden" value="no-restrictions">
                <label for="no-restrictions" class="flex items-center justify-between bg-card border-2 border-border rounded-lg p-4 cursor-pointer transition-all hover:border-primary active:scale-[0.98]">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-muted rounded-lg flex items-center justify-center">
                            <i class="fa-solid fa-circle-check text-xl text-secondary"></i>
                        </div>
                        <span class="text-foreground font-medium">No restrictions</span>
                    </div>
                    <div class="w-6 h-6 border-2 border-border rounded flex items-center justify-center checkbox-indicator transition-all">
                        <i class="fa-solid fa-check text-xs text-white hidden"></i>
                    </div>
                </label>
            </div>

        </div>

        <div id="preferences-actions" class="space-y-4 pb-4">
            <div id="progress-indicator" class="flex items-center justify-center gap-2 mb-6">
                <div class="w-8 h-1 bg-border rounded-full"></div>
                <div class="w-8 h-1 bg-primary rounded-full"></div>
            </div>

            <button id="next-btn" class="w-full bg-primary text-white font-semibold py-4 px-6 rounded-lg hover:opacity-90 transition-all active:scale-[0.98] shadow-sm">
                Next
            </button>

            <button id="skip-btn" class="w-full text-secondary font-medium py-3 hover:text-foreground transition-colors">
                Skip for now
            </button>
        </div>

    </div>

    <script>
        window.addEventListener('load', function() {
            const backBtn = document.getElementById('back-btn');
            const nextBtn = document.getElementById('next-btn');
            const skipBtn = document.getElementById('skip-btn');

            backBtn.addEventListener('click', function() {
                window.history.back();
            });

            nextBtn.addEventListener('click', function() {
                const selectedPreferences = [];
                document.querySelectorAll('#dietary-options input[type="checkbox"]:checked').forEach(function(checkbox) {
                    selectedPreferences.push(checkbox.value);
                });
                console.log('Selected preferences:', selectedPreferences);
                alert('Preferences saved: ' + (selectedPreferences.length > 0 ? selectedPreferences.join(', ') : 'None'));
            });

            skipBtn.addEventListener('click', function() {
                console.log('Skipped dietary preferences');
                alert('Preferences skipped');
            });

            const checkboxes = document.querySelectorAll('.checkbox-item input[type="checkbox"]');
            checkboxes.forEach(function(checkbox) {
                checkbox.addEventListener('change', function() {
                    const label = this.nextElementSibling;
                    const checkIndicator = label.querySelector('.checkbox-indicator');
                    const checkIcon = checkIndicator.querySelector('.fa-check');
                    
                    if (this.checked) {
                        label.classList.add('border-primary', 'bg-primary', 'bg-opacity-5');
                        checkIndicator.classList.add('bg-primary', 'border-primary');
                        checkIcon.classList.remove('hidden');
                    } else {
                        label.classList.remove('border-primary', 'bg-primary', 'bg-opacity-5');
                        checkIndicator.classList.remove('bg-primary', 'border-primary');
                        checkIcon.classList.add('hidden');
                    }
                });
            });

            function detectLocation() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(function(position) {
                        fetch('https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=' + position.coords.latitude + '&longitude=' + position.coords.longitude + '&localityLanguage=en')
                            .then(response => response.json())
                            .then(data => {
                                document.getElementById('user-country').textContent = data.countryName || 'United States';
                            })
                            .catch(error => {
                                console.log('Location detection failed, using default');
                            });
                    }, function() {
                        console.log('Location access denied, using default');
                    });
                } else {
                    console.log('Geolocation not supported, using default');
                }
            }

            detectLocation();
        });
    </script>

</body>
</html>