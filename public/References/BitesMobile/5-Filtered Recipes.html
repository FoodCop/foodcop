<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filtered Recipes</title>
    <script src='https://cdn.tailwindcss.com'></script>
            <script>
            tailwind.config = {
                        theme: {
                            extend: {
                                colors: {
                                    border: "var(--border)",
                                    input: "var(--input)",
                                    ring: "var(--ring)",
                                    background: "var(--background)",
                                    foreground: "var(--foreground)",
                                    primary: {
                                        DEFAULT: "var(--primary)",
                                        foreground: "var(--primary-foreground)",
                                    },
                                    secondary: {
                                        DEFAULT: "var(--secondary)",
                                        foreground: "var(--secondary-foreground)",
                                    },
                                    destructive: {
                                        DEFAULT: "var(--destructive)",
                                        foreground: "var(--destructive-foreground)",
                                    },
                                    muted: {
                                        DEFAULT: "var(--muted)",
                                        foreground: "var(--muted-foreground)",
                                    },
                                    accent: {
                                        DEFAULT: "var(--accent)",
                                        foreground: "var(--accent-foreground)",
                                    },
                                    popover: {
                                        DEFAULT: "var(--popover)",
                                        foreground: "var(--popover-foreground)",
                                    },
                                    card: {
                                        DEFAULT: "var(--card)",
                                        foreground: "var(--card-foreground)",
                                    },
                                    sidebar: {
                                        DEFAULT: "var(--sidebar)",
                                        foreground: "var(--sidebar-foreground)",
                                        primary: "var(--sidebar-primary)",
                                        "primary-foreground": "var(--sidebar-primary-foreground)",
                                        accent: "var(--sidebar-accent)",
                                        "accent-foreground": "var(--sidebar-accent-foreground)",
                                        border: "var(--sidebar-border)",
                                        ring: "var(--sidebar-ring)",
                                    },
                                    chart: {
                                        1: "var(--chart-1)",
                                        2: "var(--chart-2)",
                                        3: "var(--chart-3)",
                                        4: "var(--chart-4)",
                                        5: "var(--chart-5)",
                                    },
                                },
                                borderRadius: {
                                    lg: "var(--radius)",
                                    md: "calc(var(--radius) - 2px)",
                                    sm: "calc(var(--radius) - 4px)",
                                },
                                fontFamily: {
                                    sans: ["var(--font-sans)"],
                                    serif: ["var(--font-serif)"],
                                    mono: ["var(--font-mono)"],
                                },
                                boxShadow: {
                                    '2xs': 'var(--shadow-2xs)',
                                    'xs': 'var(--shadow-xs)',
                                    'sm': 'var(--shadow-sm)',
                                    'DEFAULT': 'var(--shadow)',
                                    'md': 'var(--shadow-md)',
                                    'lg': 'var(--shadow-lg)',
                                    'xl': 'var(--shadow-xl)',
                                    '2xl': 'var(--shadow-2xl)',
                                },
                            },
                        }
                    }
            </script>
            
    <script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    border: "var(--border)",
                    input: "var(--input)",
                    ring: "var(--ring)",
                    background: "var(--background)",
                    foreground: "var(--foreground)",
                    primary: {
                        DEFAULT: "var(--primary)",
                        foreground: "var(--primary-foreground)",
                    },
                    secondary: {
                        DEFAULT: "var(--secondary)",
                        foreground: "var(--secondary-foreground)",
                    },
                    destructive: {
                        DEFAULT: "var(--destructive)",
                        foreground: "var(--destructive-foreground)",
                    },
                    muted: {
                        DEFAULT: "var(--muted)",
                        foreground: "var(--muted-foreground)",
                    },
                    accent: {
                        DEFAULT: "var(--accent)",
                        foreground: "var(--accent-foreground)",
                    },
                    card: {
                        DEFAULT: "var(--card)",
                        foreground: "var(--card-foreground)",
                    },
                },
                borderRadius: {
                    lg: "var(--radius)",
                    md: "calc(var(--radius) - 2px)",
                    sm: "calc(var(--radius) - 4px)",
                },
                fontFamily: {
                    sans: ["var(--font-sans)"],
                    serif: ["var(--font-serif)"],
                    mono: ["var(--font-mono)"],
                },
                boxShadow: {
                    'DEFAULT': 'var(--shadow)',
                },
            },
        }
    }
    </script>
    <script src="https://cdn.plot.ly/plotly-3.1.1.min.js"></script>
    <script> window.FontAwesomeConfig = { autoReplaceSvg: 'nest'};</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --background: #FAFAFA;
            --foreground: #0f172a;
            --card: #ffffff;
            --card-foreground: #0f172a;
            --primary: #FFD500;
            --primary-foreground: #8A8A8A;
            --secondary: #64748b;
            --secondary-foreground: #ffffff;
            --muted: #FAFAFA;
            --muted-foreground: #0f172a;
            --accent: #f59e0b;
            --accent-foreground: #ffffff;
            --destructive: #ef4444;
            --destructive-foreground: #ffffff;
            --border: #EEE;
            --input: #FFFFFF;
            --ring: #94a3b8;
            --font-sans: Be Vietnam Pro;
            --font-serif: Georgia, serif;
            --font-mono: JetBrains Mono, monospace;
            --radius: 10px;
            --shadow: -2px 4px 12px 4px rgba(51,51,51,0.05);
        }
        ::-webkit-scrollbar { display: none;}
        body { font-family: var(--font-sans), sans-serif; }
        .recipe-popup { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.5); 
            z-index: 1000; 
            overflow-y: auto;
        }
        .recipe-popup.active { display: flex; }
        .filter-chip { transition: all 0.2s ease; }
        .filter-chip.active { 
            background: var(--primary);
            color: var(--primary-foreground);
        }
    </style>
</head>
<body class="bg-background">
    
    <header id="header" class="sticky top-0 bg-card border-b border-border z-50">
        <div class="px-4 py-3 flex items-center justify-between">
            <button onclick="goBack()" class="w-10 h-10 rounded-full bg-muted flex items-center justify-center">
                <i class="fa-solid fa-arrow-left text-foreground"></i>
            </button>
            <h1 class="text-lg font-bold text-foreground">Filtered Results</h1>
            <button class="w-10 h-10 rounded-full bg-muted flex items-center justify-center">
                <i class="fa-regular fa-bell text-foreground"></i>
            </button>
        </div>
    </header>

    <main id="main-content" class="pb-20">
        
        <section id="active-filters-section" class="px-4 py-4 bg-card border-b border-border">
            <div class="flex items-center justify-between mb-3">
                <h3 class="text-sm font-semibold text-foreground">Active Filters</h3>
                <button onclick="clearAllFilters()" class="text-xs font-medium text-destructive">Clear All</button>
            </div>
            <div id="active-filters" class="flex flex-wrap gap-2">
                <div class="pl-3 pr-2 py-1.5 rounded-full bg-primary text-primary-foreground text-xs font-medium flex items-center gap-2">
                    Vegetarian
                    <button onclick="removeFilter(this)" class="w-4 h-4 rounded-full bg-primary-foreground/20 flex items-center justify-center">
                        <i class="fa-solid fa-xmark text-[10px]"></i>
                    </button>
                </div>
                <div class="pl-3 pr-2 py-1.5 rounded-full bg-primary text-primary-foreground text-xs font-medium flex items-center gap-2">
                    Quick
                    <button onclick="removeFilter(this)" class="w-4 h-4 rounded-full bg-primary-foreground/20 flex items-center justify-center">
                        <i class="fa-solid fa-xmark text-[10px]"></i>
                    </button>
                </div>
                <div class="pl-3 pr-2 py-1.5 rounded-full bg-primary text-primary-foreground text-xs font-medium flex items-center gap-2">
                    Low Calorie
                    <button onclick="removeFilter(this)" class="w-4 h-4 rounded-full bg-primary-foreground/20 flex items-center justify-center">
                        <i class="fa-solid fa-xmark text-[10px]"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="search-refine-section" class="px-4 py-4 bg-background">
            <div class="relative">
                <i class="fa-solid fa-search absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground"></i>
                <input type="text" placeholder="Refine your search..." class="w-full pl-12 pr-12 py-3.5 rounded-xl bg-card border border-border text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring">
                <button onclick="toggleAdvancedFilters()" class="absolute right-3 top-1/2 -translate-y-1/2 w-9 h-9 rounded-lg bg-primary flex items-center justify-center">
                    <i class="fa-solid fa-sliders text-primary-foreground"></i>
                </button>
            </div>
        </section>

        <section id="advanced-filters-section" class="hidden px-4 py-4 bg-card border-y border-border">
            <h3 class="text-sm font-semibold text-foreground mb-3">Cooking Time</h3>
            <div class="flex flex-wrap gap-2 mb-4">
                <button onclick="toggleFilter(this)" class="filter-chip px-4 py-2 rounded-full bg-muted text-foreground text-sm font-medium">Under 15 min</button>
                <button onclick="toggleFilter(this)" class="filter-chip px-4 py-2 rounded-full bg-muted text-foreground text-sm font-medium">15-30 min</button>
                <button onclick="toggleFilter(this)" class="filter-chip px-4 py-2 rounded-full bg-muted text-foreground text-sm font-medium">30+ min</button>
            </div>
            
            <h3 class="text-sm font-semibold text-foreground mb-3">Calories Range</h3>
            <div class="flex flex-wrap gap-2 mb-4">
                <button onclick="toggleFilter(this)" class="filter-chip active px-4 py-2 rounded-full text-sm font-medium">Under 300</button>
                <button onclick="toggleFilter(this)" class="filter-chip px-4 py-2 rounded-full bg-muted text-foreground text-sm font-medium">300-500</button>
                <button onclick="toggleFilter(this)" class="filter-chip px-4 py-2 rounded-full bg-muted text-foreground text-sm font-medium">500+</button>
            </div>

            <h3 class="text-sm font-semibold text-foreground mb-3">Difficulty</h3>
            <div class="flex flex-wrap gap-2 mb-4">
                <button onclick="toggleFilter(this)" class="filter-chip px-4 py-2 rounded-full bg-muted text-foreground text-sm font-medium">Easy</button>
                <button onclick="toggleFilter(this)" class="filter-chip px-4 py-2 rounded-full bg-muted text-foreground text-sm font-medium">Medium</button>
                <button onclick="toggleFilter(this)" class="filter-chip px-4 py-2 rounded-full bg-muted text-foreground text-sm font-medium">Advanced</button>
            </div>

            <h3 class="text-sm font-semibold text-foreground mb-3">Ingredients to Exclude</h3>
            <div class="flex flex-wrap gap-2">
                <button onclick="toggleFilter(this)" class="filter-chip px-4 py-2 rounded-full bg-muted text-foreground text-sm font-medium">Nuts</button>
                <button onclick="toggleFilter(this)" class="filter-chip px-4 py-2 rounded-full bg-muted text-foreground text-sm font-medium">Dairy</button>
                <button onclick="toggleFilter(this)" class="filter-chip px-4 py-2 rounded-full bg-muted text-foreground text-sm font-medium">Gluten</button>
                <button onclick="toggleFilter(this)" class="filter-chip px-4 py-2 rounded-full bg-muted text-foreground text-sm font-medium">Soy</button>
                <button onclick="toggleFilter(this)" class="filter-chip px-4 py-2 rounded-full bg-muted text-foreground text-sm font-medium">Eggs</button>
            </div>
        </section>

        <section id="results-header-section" class="px-4 py-4 bg-background">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="text-lg font-bold text-foreground">24 Recipes Found</h2>
                    <p class="text-sm text-muted-foreground">Matching your preferences</p>
                </div>
                <button onclick="toggleSortMenu()" class="flex items-center gap-2 px-3 py-2 rounded-lg bg-card border border-border">
                    <i class="fa-solid fa-arrow-down-short-wide text-muted-foreground text-sm"></i>
                    <span class="text-sm font-medium text-foreground">Sort</span>
                </button>
            </div>
            
            <div id="sort-menu" class="hidden mt-3 bg-card rounded-xl border border-border p-2 shadow-lg">
                <button onclick="selectSort(this)" class="w-full px-3 py-2.5 rounded-lg text-left text-sm font-medium text-foreground hover:bg-muted flex items-center justify-between">
                    Most Popular
                    <i class="fa-solid fa-check text-primary text-xs"></i>
                </button>
                <button onclick="selectSort(this)" class="w-full px-3 py-2.5 rounded-lg text-left text-sm font-medium text-foreground hover:bg-muted">Highest Rated</button>
                <button onclick="selectSort(this)" class="w-full px-3 py-2.5 rounded-lg text-left text-sm font-medium text-foreground hover:bg-muted">Quickest First</button>
                <button onclick="selectSort(this)" class="w-full px-3 py-2.5 rounded-lg text-left text-sm font-medium text-foreground hover:bg-muted">Lowest Calories</button>
            </div>
        </section>

        <section id="filtered-results-section" class="px-4 pb-6">
            <div class="space-y-3">
                
                <div id="result-card-1" class="bg-card rounded-2xl overflow-hidden border border-border shadow-sm" onclick="openRecipe('Veggie Quinoa Bowl', '12 min', '240 kcal', '4.9')">
                    <div class="h-44 overflow-hidden">
                        <img class="w-full h-full object-cover" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/veggie-quinoa-bowl.png" alt="colorful quinoa bowl with roasted vegetables and tahini dressing, healthy food photography" />
                    </div>
                    <div class="p-4">
                        <div class="flex items-start justify-between mb-2">
                            <h3 class="text-base font-bold text-foreground flex-1">Veggie Quinoa Bowl</h3>
                            <div class="flex items-center gap-1 ml-2">
                                <i class="fa-solid fa-star text-primary text-xs"></i>
                                <span class="text-sm font-semibold text-foreground">4.9</span>
                            </div>
                        </div>
                        <div class="flex items-center gap-4 mb-3">
                            <div class="flex items-center gap-1.5">
                                <i class="fa-regular fa-clock text-muted-foreground text-sm"></i>
                                <span class="text-xs text-muted-foreground">12 min</span>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <i class="fa-solid fa-fire text-accent text-sm"></i>
                                <span class="text-xs text-muted-foreground">240 kcal</span>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-2.5 py-1 rounded-full bg-muted text-xs font-medium text-foreground">Vegetarian</span>
                            <span class="px-2.5 py-1 rounded-full bg-muted text-xs font-medium text-foreground">Quick</span>
                            <span class="px-2.5 py-1 rounded-full bg-green-100 text-xs font-medium text-green-700">Low Cal</span>
                        </div>
                        <div class="flex items-center gap-2 mt-3 pt-3 border-t border-border">
                            <button onclick="event.stopPropagation(); saveRecipe(event)" class="flex-1 py-2.5 rounded-xl bg-muted text-foreground text-sm font-medium flex items-center justify-center gap-2">
                                <i class="fa-regular fa-bookmark"></i>
                                Save
                            </button>
                            <button onclick="event.stopPropagation(); shareRecipe(event)" class="flex-1 py-2.5 rounded-xl bg-primary text-primary-foreground text-sm font-medium flex items-center justify-center gap-2">
                                <i class="fa-regular fa-paper-plane"></i>
                                Send
                            </button>
                        </div>
                    </div>
                </div>

                <div id="result-card-2" class="bg-card rounded-2xl overflow-hidden border border-border shadow-sm" onclick="openRecipe('Mediterranean Wrap', '10 min', '280 kcal', '4.7')">
                    <div class="h-44 overflow-hidden">
                        <img class="w-full h-full object-cover" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/mediterranean-wrap.png" alt="fresh mediterranean wrap with hummus vegetables and feta, healthy lunch photography" />
                    </div>
                    <div class="p-4">
                        <div class="flex items-start justify-between mb-2">
                            <h3 class="text-base font-bold text-foreground flex-1">Mediterranean Wrap</h3>
                            <div class="flex items-center gap-1 ml-2">
                                <i class="fa-solid fa-star text-primary text-xs"></i>
                                <span class="text-sm font-semibold text-foreground">4.7</span>
                            </div>
                        </div>
                        <div class="flex items-center gap-4 mb-3">
                            <div class="flex items-center gap-1.5">
                                <i class="fa-regular fa-clock text-muted-foreground text-sm"></i>
                                <span class="text-xs text-muted-foreground">10 min</span>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <i class="fa-solid fa-fire text-accent text-sm"></i>
                                <span class="text-xs text-muted-foreground">280 kcal</span>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-2.5 py-1 rounded-full bg-muted text-xs font-medium text-foreground">Vegetarian</span>
                            <span class="px-2.5 py-1 rounded-full bg-muted text-xs font-medium text-foreground">Quick</span>
                            <span class="px-2.5 py-1 rounded-full bg-green-100 text-xs font-medium text-green-700">Low Cal</span>
                        </div>
                        <div class="flex items-center gap-2 mt-3 pt-3 border-t border-border">
                            <button onclick="event.stopPropagation(); saveRecipe(event)" class="flex-1 py-2.5 rounded-xl bg-muted text-foreground text-sm font-medium flex items-center justify-center gap-2">
                                <i class="fa-regular fa-bookmark"></i>
                                Save
                            </button>
                            <button onclick="event.stopPropagation(); shareRecipe(event)" class="flex-1 py-2.5 rounded-xl bg-primary text-primary-foreground text-sm font-medium flex items-center justify-center gap-2">
                                <i class="fa-regular fa-paper-plane"></i>
                                Send
                            </button>
                        </div>
                    </div>
                </div>

                <div id="result-card-3" class="bg-card rounded-2xl overflow-hidden border border-border shadow-sm" onclick="openRecipe('Caprese Salad', '8 min', '195 kcal', '4.8')">
                    <div class="h-44 overflow-hidden">
                        <img class="w-full h-full object-cover" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/caprese-salad.png" alt="fresh caprese salad with tomatoes mozzarella and basil, italian food photography" />
                    </div>
                    <div class="p-4">
                        <div class="flex items-start justify-between mb-2">
                            <h3 class="text-base font-bold text-foreground flex-1">Caprese Salad</h3>
                            <div class="flex items-center gap-1 ml-2">
                                <i class="fa-solid fa-star text-primary text-xs"></i>
                                <span class="text-sm font-semibold text-foreground">4.8</span>
                            </div>
                        </div>
                        <div class="flex items-center gap-4 mb-3">
                            <div class="flex items-center gap-1.5">
                                <i class="fa-regular fa-clock text-muted-foreground text-sm"></i>
                                <span class="text-xs text-muted-foreground">8 min</span>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <i class="fa-solid fa-fire text-accent text-sm"></i>
                                <span class="text-xs text-muted-foreground">195 kcal</span>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-2.5 py-1 rounded-full bg-muted text-xs font-medium text-foreground">Vegetarian</span>
                            <span class="px-2.5 py-1 rounded-full bg-muted text-xs font-medium text-foreground">Quick</span>
                            <span class="px-2.5 py-1 rounded-full bg-green-100 text-xs font-medium text-green-700">Low Cal</span>
                        </div>
                        <div class="flex items-center gap-2 mt-3 pt-3 border-t border-border">
                            <button onclick="event.stopPropagation(); saveRecipe(event)" class="flex-1 py-2.5 rounded-xl bg-muted text-foreground text-sm font-medium flex items-center justify-center gap-2">
                                <i class="fa-regular fa-bookmark"></i>
                                Save
                            </button>
                            <button onclick="event.stopPropagation(); shareRecipe(event)" class="flex-1 py-2.5 rounded-xl bg-primary text-primary-foreground text-sm font-medium flex items-center justify-center gap-2">
                                <i class="fa-regular fa-paper-plane"></i>
                                Send
                            </button>
                        </div>
                    </div>
                </div>

                <div id="result-card-4" class="bg-card rounded-2xl overflow-hidden border border-border shadow-sm" onclick="openRecipe('Spinach Omelette', '14 min', '220 kcal', '4.6')">
                    <div class="h-44 overflow-hidden">
                        <img class="w-full h-full object-cover" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/spinach-omelette.png" alt="fluffy spinach omelette with herbs, breakfast food photography" />
                    </div>
                    <div class="p-4">
                        <div class="flex items-start justify-between mb-2">
                            <h3 class="text-base font-bold text-foreground flex-1">Spinach Omelette</h3>
                            <div class="flex items-center gap-1 ml-2">
                                <i class="fa-solid fa-star text-primary text-xs"></i>
                                <span class="text-sm font-semibold text-foreground">4.6</span>
                            </div>
                        </div>
                        <div class="flex items-center gap-4 mb-3">
                            <div class="flex items-center gap-1.5">
                                <i class="fa-regular fa-clock text-muted-foreground text-sm"></i>
                                <span class="text-xs text-muted-foreground">14 min</span>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <i class="fa-solid fa-fire text-accent text-sm"></i>
                                <span class="text-xs text-muted-foreground">220 kcal</span>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-2.5 py-1 rounded-full bg-muted text-xs font-medium text-foreground">Vegetarian</span>
                            <span class="px-2.5 py-1 rounded-full bg-muted text-xs font-medium text-foreground">Quick</span>
                            <span class="px-2.5 py-1 rounded-full bg-green-100 text-xs font-medium text-green-700">Low Cal</span>
                        </div>
                        <div class="flex items-center gap-2 mt-3 pt-3 border-t border-border">
                            <button onclick="event.stopPropagation(); saveRecipe(event)" class="flex-1 py-2.5 rounded-xl bg-muted text-foreground text-sm font-medium flex items-center justify-center gap-2">
                                <i class="fa-regular fa-bookmark"></i>
                                Save
                            </button>
                            <button onclick="event.stopPropagation(); shareRecipe(event)" class="flex-1 py-2.5 rounded-xl bg-primary text-primary-foreground text-sm font-medium flex items-center justify-center gap-2">
                                <i class="fa-regular fa-paper-plane"></i>
                                Send
                            </button>
                        </div>
                    </div>
                </div>

                <div id="result-card-5" class="bg-card rounded-2xl overflow-hidden border border-border shadow-sm" onclick="openRecipe('Greek Yogurt Parfait', '5 min', '185 kcal', '4.9')">
                    <div class="h-44 overflow-hidden">
                        <img class="w-full h-full object-cover" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/greek-yogurt-parfait.png" alt="layered greek yogurt parfait with berries and granola, healthy breakfast photography" />
                    </div>
                    <div class="p-4">
                        <div class="flex items-start justify-between mb-2">
                            <h3 class="text-base font-bold text-foreground flex-1">Greek Yogurt Parfait</h3>
                            <div class="flex items-center gap-1 ml-2">
                                <i class="fa-solid fa-star text-primary text-xs"></i>
                                <span class="text-sm font-semibold text-foreground">4.9</span>
                            </div>
                        </div>
                        <div class="flex items-center gap-4 mb-3">
                            <div class="flex items-center gap-1.5">
                                <i class="fa-regular fa-clock text-muted-foreground text-sm"></i>
                                <span class="text-xs text-muted-foreground">5 min</span>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <i class="fa-solid fa-fire text-accent text-sm"></i>
                                <span class="text-xs text-muted-foreground">185 kcal</span>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-2.5 py-1 rounded-full bg-muted text-xs font-medium text-foreground">Vegetarian</span>
                            <span class="px-2.5 py-1 rounded-full bg-muted text-xs font-medium text-foreground">Quick</span>
                            <span class="px-2.5 py-1 rounded-full bg-green-100 text-xs font-medium text-green-700">Low Cal</span>
                        </div>
                        <div class="flex items-center gap-2 mt-3 pt-3 border-t border-border">
                            <button onclick="event.stopPropagation(); saveRecipe(event)" class="flex-1 py-2.5 rounded-xl bg-muted text-foreground text-sm font-medium flex items-center justify-center gap-2">
                                <i class="fa-regular fa-bookmark"></i>
                                Save
                            </button>
                            <button onclick="event.stopPropagation(); shareRecipe(event)" class="flex-1 py-2.5 rounded-xl bg-primary text-primary-foreground text-sm font-medium flex items-center justify-center gap-2">
                                <i class="fa-regular fa-paper-plane"></i>
                                Send
                            </button>
                        </div>
                    </div>
                </div>

                <div id="result-card-6" class="bg-card rounded-2xl overflow-hidden border border-border shadow-sm" onclick="openRecipe('Veggie Stir-Fry', '13 min', '265 kcal', '4.7')">
                    <div class="h-44 overflow-hidden">
                        <img class="w-full h-full object-cover" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/veggie-stir-fry.png" alt="colorful vegetable stir-fry with soy sauce, asian food photography" />
                    </div>
                    <div class="p-4">
                        <div class="flex items-start justify-between mb-2">
                            <h3 class="text-base font-bold text-foreground flex-1">Veggie Stir-Fry</h3>
                            <div class="flex items-center gap-1 ml-2">
                                <i class="fa-solid fa-star text-primary text-xs"></i>
                                <span class="text-sm font-semibold text-foreground">4.7</span>
                            </div>
                        </div>
                        <div class="flex items-center gap-4 mb-3">
                            <div class="flex items-center gap-1.5">
                                <i class="fa-regular fa-clock text-muted-foreground text-sm"></i>
                                <span class="text-xs text-muted-foreground">13 min</span>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <i class="fa-solid fa-fire text-accent text-sm"></i>
                                <span class="text-xs text-muted-foreground">265 kcal</span>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-2.5 py-1 rounded-full bg-muted text-xs font-medium text-foreground">Vegetarian</span>
                            <span class="px-2.5 py-1 rounded-full bg-muted text-xs font-medium text-foreground">Quick</span>
                            <span class="px-2.5 py-1 rounded-full bg-green-100 text-xs font-medium text-green-700">Low Cal</span>
                        </div>
                        <div class="flex items-center gap-2 mt-3 pt-3 border-t border-border">
                            <button onclick="event.stopPropagation(); saveRecipe(event)" class="flex-1 py-2.5 rounded-xl bg-muted text-foreground text-sm font-medium flex items-center justify-center gap-2">
                                <i class="fa-regular fa-bookmark"></i>
                                Save
                            </button>
                            <button onclick="event.stopPropagation(); shareRecipe(event)" class="flex-1 py-2.5 rounded-xl bg-primary text-primary-foreground text-sm font-medium flex items-center justify-center gap-2">
                                <i class="fa-regular fa-paper-plane"></i>
                                Send
                            </button>
                        </div>
                    </div>
                </div>

            </div>

            <button class="w-full mt-6 py-3.5 rounded-xl bg-card border-2 border-dashed border-border text-foreground font-medium flex items-center justify-center gap-2">
                <i class="fa-solid fa-rotate text-muted-foreground"></i>
                Load More Results
            </button>
        </section>

    </main>

    <nav id="bottom-nav" class="fixed bottom-0 left-0 right-0 bg-card border-t border-border">
        <div class="flex items-center justify-around py-3">
            <button class="flex flex-col items-center gap-1">
                <i class="fa-solid fa-house text-muted-foreground text-xl"></i>
                <span class="text-xs font-medium text-muted-foreground">Home</span>
            </button>
            <button class="flex flex-col items-center gap-1">
                <i class="fa-solid fa-compass text-primary text-xl"></i>
                <span class="text-xs font-medium text-primary">Explore</span>
            </button>
            <button class="flex flex-col items-center gap-1">
                <i class="fa-regular fa-bookmark text-muted-foreground text-xl"></i>
                <span class="text-xs font-medium text-muted-foreground">Saved</span>
            </button>
            <button class="flex flex-col items-center gap-1">
                <i class="fa-regular fa-user text-muted-foreground text-xl"></i>
                <span class="text-xs font-medium text-muted-foreground">Profile</span>
            </button>
        </div>
    </nav>

    <div id="recipe-popup" class="recipe-popup">
        <div class="w-full max-w-md mx-auto bg-background min-h-screen">
            <div class="sticky top-0 bg-card border-b border-border z-10">
                <div class="px-4 py-3 flex items-center justify-between">
                    <button onclick="closeRecipe()" class="w-10 h-10 rounded-full bg-muted flex items-center justify-center">
                        <i class="fa-solid fa-arrow-left text-foreground"></i>
                    </button>
                    <h2 class="text-lg font-bold text-foreground" id="popup-title">Recipe Details</h2>
                    <button class="w-10 h-10 rounded-full bg-muted flex items-center justify-center">
                        <i class="fa-regular fa-heart text-foreground"></i>
                    </button>
                </div>
            </div>

            <div id="popup-content" class="pb-6">
                <div class="h-64 overflow-hidden">
                    <img class="w-full h-full object-cover" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/recipe-detail.png" alt="delicious food photography" />
                </div>

                <div class="px-4 py-5">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <h1 class="text-2xl font-bold text-foreground mb-2" id="popup-recipe-name">Recipe Name</h1>
                            <div class="flex items-center gap-4">
                                <div class="flex items-center gap-1.5">
                                    <i class="fa-regular fa-clock text-muted-foreground"></i>
                                    <span class="text-sm text-muted-foreground" id="popup-time">15 min</span>
                                </div>
                                <div class="flex items-center gap-1.5">
                                    <i class="fa-solid fa-fire text-accent"></i>
                                    <span class="text-sm text-muted-foreground" id="popup-calories">250 kcal</span>
                                </div>
                                <div class="flex items-center gap-1.5">
                                    <i class="fa-solid fa-star text-primary"></i>
                                    <span class="text-sm font-semibold text-foreground" id="popup-rating">4.8</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="flex items-center gap-2 mb-6">
                        <button class="flex-1 py-3 rounded-xl bg-muted text-foreground text-sm font-medium flex items-center justify-center gap-2">
                            <i class="fa-regular fa-bookmark"></i>
                            Save to Plate
                        </button>
                        <button class="flex-1 py-3 rounded-xl bg-primary text-primary-foreground text-sm font-medium flex items-center justify-center gap-2">
                            <i class="fa-regular fa-paper-plane"></i>
                            Send to Friend
                        </button>
                    </div>

                    <div class="mb-6">
                        <h3 class="text-lg font-bold text-foreground mb-3">Ingredients</h3>
                        <div class="bg-card rounded-2xl border border-border p-4 space-y-3">
                            <div class="flex items-center gap-3">
                                <div class="w-2 h-2 rounded-full bg-primary"></div>
                                <span class="text-sm text-foreground">1 cup quinoa</span>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="w-2 h-2 rounded-full bg-primary"></div>
                                <span class="text-sm text-foreground">2 cups mixed vegetables</span>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="w-2 h-2 rounded-full bg-primary"></div>
                                <span class="text-sm text-foreground">2 tbsp olive oil</span>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="w-2 h-2 rounded-full bg-primary"></div>
                                <span class="text-sm text-foreground">1 lemon (juice)</span>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="w-2 h-2 rounded-full bg-primary"></div>
                                <span class="text-sm text-foreground">Salt and pepper to taste</span>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="w-2 h-2 rounded-full bg-primary"></div>
                                <span class="text-sm text-foreground">Fresh herbs for garnish</span>
                            </div>
                        </div>
                    </div>

                    <div class="mb-6">
                        <h3 class="text-lg font-bold text-foreground mb-3">Instructions</h3>
                        <div class="bg-card rounded-2xl border border-border p-4 space-y-4">
                            <div class="flex gap-3">
                                <div class="flex-shrink-0 w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xs font-bold">1</div>
                                <p class="text-sm text-foreground pt-0.5">Cook quinoa according to package instructions.</p>
                            </div>
                            <div class="flex gap-3">
                                <div class="flex-shrink-0 w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xs font-bold">2</div>
                                <p class="text-sm text-foreground pt-0.5">Roast mixed vegetables in olive oil until tender.</p>
                            </div>
                            <div class="flex gap-3">
                                <div class="flex-shrink-0 w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xs font-bold">3</div>
                                <p class="text-sm text-foreground pt-0.5">Combine quinoa and vegetables in a bowl.</p>
                            </div>
                            <div class="flex gap-3">
                                <div class="flex-shrink-0 w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xs font-bold">4</div>
                                <p class="text-sm text-foreground pt-0.5">Drizzle with lemon juice and season with salt and pepper.</p>
                            </div>
                            <div class="flex gap-3">
                                <div class="flex-shrink-0 w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xs font-bold">5</div>
                                <p class="text-sm text-foreground pt-0.5">Garnish with fresh herbs and serve warm.</p>
                            </div>
                        </div>
                    </div>

                    <div class="mb-6">
                        <h3 class="text-lg font-bold text-foreground mb-3">Nutritional Information</h3>
                        <div class="bg-card rounded-2xl border border-border p-4">
                            <div id="nutrition-chart" style="height: 280px;"></div>
                        </div>
                    </div>

                    <div class="mb-6">
                        <h3 class="text-lg font-bold text-foreground mb-3">Macronutrients Breakdown</h3>
                        <div class="bg-card rounded-2xl border border-border p-4">
                            <div id="macro-chart" style="height: 280px;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function goBack() {
            window.history.back();
        }

        function toggleAdvancedFilters() {
            const filterSection = document.getElementById('advanced-filters-section');
            filterSection.classList.toggle('hidden');
        }

        function toggleFilter(element) {
            element.classList.toggle('active');
        }

        function removeFilter(button) {
            button.parentElement.remove();
            const activeFiltersDiv = document.getElementById('active-filters');
            if (activeFiltersDiv.children.length === 0) {
                activeFiltersDiv.innerHTML = '<p class="text-sm text-muted-foreground">No active filters</p>';
            }
        }

        function clearAllFilters() {
            const activeFiltersDiv = document.getElementById('active-filters');
            activeFiltersDiv.innerHTML = '<p class="text-sm text-muted-foreground">No active filters</p>';
        }

        function toggleSortMenu() {
            const sortMenu = document.getElementById('sort-menu');
            sortMenu.classList.toggle('hidden');
        }

        function selectSort(button) {
            const sortButtons = document.querySelectorAll('#sort-menu button');
            sortButtons.forEach(btn => {
                const icon = btn.querySelector('i');
                if (icon) icon.remove();
            });
            
            const checkIcon = document.createElement('i');
            checkIcon.className = 'fa-solid fa-check text-primary text-xs';
            button.appendChild(checkIcon);
            
            toggleSortMenu();
        }

        function saveRecipe(event) {
            event.stopPropagation();
            alert('Recipe saved to your plate!');
        }

        function shareRecipe(event) {
            event.stopPropagation();
            alert('Recipe shared with friend!');
        }

        function openRecipe(name, time, calories, rating) {
            document.getElementById('popup-recipe-name').textContent = name;
            document.getElementById('popup-time').textContent = time;
            document.getElementById('popup-calories').textContent = calories;
            document.getElementById('popup-rating').textContent = rating;
            document.getElementById('recipe-popup').classList.add('active');
            document.body.style.overflow = 'hidden';
            
            setTimeout(() => {
                renderNutritionChart();
                renderMacroChart();
            }, 100);
        }

        function closeRecipe() {
            document.getElementById('recipe-popup').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        window.addEventListener('load', function() {
            try {
                function renderNutritionChart() {
                    const data = [{
                        type: 'bar',
                        x: ['Protein', 'Carbs', 'Fat', 'Fiber', 'Sugar'],
                        y: [10, 32, 8, 6, 3],
                        marker: {
                            color: ['#FFD500', '#f59e0b', '#64748b', '#10b981', '#ef4444']
                        }
                    }];

                    const layout = {
                        title: { text: 'Nutrients (g)', font: { size: 14 } },
                        xaxis: { title: '' },
                        yaxis: { title: 'Grams' },
                        margin: { t: 40, r: 20, b: 40, l: 50 },
                        plot_bgcolor: '#FAFAFA',
                        paper_bgcolor: '#FAFAFA',
                        showlegend: false
                    };

                    const config = {
                        responsive: true,
                        displayModeBar: false,
                        displaylogo: false
                    };

                    Plotly.newPlot('nutrition-chart', data, layout, config);
                }

                function renderMacroChart() {
                    const data = [{
                        type: 'pie',
                        labels: ['Protein', 'Carbohydrates', 'Fats'],
                        values: [17, 55, 28],
                        marker: {
                            colors: ['#FFD500', '#f59e0b', '#64748b']
                        },
                        textinfo: 'label+percent',
                        textposition: 'inside'
                    }];

                    const layout = {
                        title: { text: 'Macros Distribution', font: { size: 14 } },
                        margin: { t: 40, r: 20, b: 20, l: 20 },
                        plot_bgcolor: '#FAFAFA',
                        paper_bgcolor: '#FAFAFA',
                        showlegend: true,
                        legend: { orientation: 'h', y: -0.1 }
                    };

                    const config = {
                        responsive: true,
                        displayModeBar: false,
                        displaylogo: false
                    };

                    Plotly.newPlot('macro-chart', data, layout, config);
                }

                window.renderNutritionChart = renderNutritionChart;
                window.renderMacroChart = renderMacroChart;
            } catch(e) {
                console.error('Chart rendering error:', e);
            }
        });
    </script>

</body>
</html>